@import 'ag-grid-community/styles/ag-grid.css';
@import 'ag-grid-community/styles/ag-theme-quartz.css';

// ===== Figma Design Tokens =====
$color-primary-purple: #4E2683;
$color-secondary-gray: #858D94;
$color-label-text: #5C6166;
$color-input-border: #B4BABF;
$color-header-border: #8A8886;
$color-header-bg: #FAFAFA;
$color-row-even: #F7F5FF;
$color-row-odd: #FFFFFF;
$color-text-primary: #323130;
$color-text-cell: #37317A;

$grid-header-height: 43px;
$grid-row-height: 32px;
$checkbox-size: 20px;
$checkbox-border-radius: 2px;

:host {
  display: block;
  height: 100%;
}

// AG Grid Custom Styling - Complete reset to match Figma
.ag-theme-quartz {
  // Reset ALL possible border-related variables
  --ag-borders: none;
  --ag-borders-critical: none;
  --ag-borders-secondary: none;
  --ag-borders-row: none;
  --ag-row-border-width: 0;
  --ag-row-border-style: none;
  --ag-row-border-color: transparent;
  --ag-border-color: transparent;
  --ag-cell-horizontal-border: none;
  --ag-header-column-separator-display: none;
  --ag-header-column-resize-handle-display: none;
  --ag-header-column-separator-color: transparent;
  --ag-header-column-resize-handle-color: transparent;
  --ag-pinned-column-border-width: 0;
  --ag-secondary-border-color: transparent;
  
  // Header - Figma specs
  --ag-header-background-color: #{$color-header-bg};
  --ag-header-foreground-color: #{$color-text-primary};
  --ag-header-height: #{$grid-header-height};
  
  // Rows - Figma specs
  --ag-row-height: #{$grid-row-height};
  --ag-odd-row-background-color: #{$color-row-odd};
  
  // Font
  --ag-font-family: 'Open Sans', sans-serif;
  --ag-font-size: 14px;
  
  // Selection
  --ag-selected-row-background-color: rgba(78, 38, 131, 0.08);
  --ag-row-hover-color: rgba(78, 38, 131, 0.04);
  
  // Checkbox - Figma specs: 20x20px, 2px radius, #858D94 border
  --ag-checkbox-checked-color: #{$color-primary-purple};
  --ag-checkbox-unchecked-color: transparent;
  --ag-checkbox-background-color: transparent;
  --ag-checkbox-border-color: #{$color-secondary-gray};
  // Ensure we don't accidentally hide it with global border resets
  --ag-checkbox-border-width: 1px;
  --ag-checkbox-border-radius: 2px;
}

// Specific component overrides are now handled in the global styles.scss 
// to ensure they properly override AG Grid's internal theme styles.
// See: apps/client/src/styles.scss "AG GRID OVERRIDES"

// Global override for any lingering borders (highest specificity)
:host ::ng-deep {
  .ag-theme-quartz .ag-row,
  .ag-theme-quartz .ag-cell,
  .ag-theme-quartz .ag-header-cell {
    border-color: transparent !important;
    box-shadow: none !important;
  }
  --ag-header-background-color: #FAFAFA !important;
  .ag-header {
    background-color: #FAFAFA;
}
}

// ===== Advance Filters Panel Styling =====
.advance-filters-panel {
  font-family: 'Open Sans', sans-serif;
}

.advance-filter-field {
  margin-bottom: 0;
}

// Range Input Slider Styling
.advance-filter-range-input {
  &::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 16px;
    height: 16px;
    border-radius: 50%;
    background-color: $color-primary-purple;
    border: 2px solid #FFFFFF;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    cursor: grab;
    transition: transform 0.15s ease;
    
    &:hover {
      transform: scale(1.1);
    }
    
    &:active {
      cursor: grabbing;
    }
  }
  
  &::-moz-range-thumb {
    width: 16px;
    height: 16px;
    border-radius: 50%;
    background-color: $color-primary-purple;
    border: 2px solid #FFFFFF;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    cursor: grab;
    transition: transform 0.15s ease;
    
    &:hover {
      transform: scale(1.1);
    }
    
    &:active {
      cursor: grabbing;
    }
  }
  
  &::-webkit-slider-runnable-track {
    background: transparent;
    height: 16px;
  }
  
  &::-moz-range-track {
    background: transparent;
    height: 16px;
  }
}

// Score Range Dual Slider - Pointer events for overlapping sliders
.score-range-slider {
  .score-min-input {
    pointer-events: none;
    z-index: 1;
    
    &::-webkit-slider-thumb {
      pointer-events: auto;
      z-index: 10;
    }
    
    &::-moz-range-thumb {
      pointer-events: auto;
      z-index: 10;
    }
  }
  
  .score-max-input {
    pointer-events: none;
    z-index: 2;
    
    &::-webkit-slider-thumb {
      pointer-events: auto;
      z-index: 10;
    }
    
    &::-moz-range-thumb {
      pointer-events: auto;
      z-index: 10;
    }
  }
}

// Select placeholder styling - Figma: #B4BABF for placeholder text
// Border: 1px on top/sides, 2px on bottom per Figma border-[1px_1px_2px]
.advance-filter-select {
  color: #605E5C;
  font-family: 'Open Sans', sans-serif;
  font-weight: 400;
  border-width: 1px 1px 2px 1px !important; // 2px bottom border
  
  // When no value is selected (showing placeholder)
  &:has(option:first-child:checked) {
    color: #B4BABF;
  }
  
  option {
    color: #605E5C;
    font-weight: 400;
  }
  
  option[value=""] {
    color: #B4BABF;
  }
}

// Apply placeholder color styling via CSS when empty value selected
select.advance-filter-select option:disabled,
select.advance-filter-select option[value=""] {
  color: #B4BABF;
}

// Textarea and input border styling - Figma: 1px top/sides, 2px bottom
.advance-filters-panel {
  textarea,
  input[type="text"],
  select {
    border-width: 1px 1px 2px 1px !important;
  }
  
  // Date input styling - Figma: 152px width, 32px height
  input[type="date"] {
    font-family: 'Open Sans', sans-serif;
    font-weight: 400;
    border-width: 1px 1px 2px 1px !important;
    width: 200px; // Larger width per Figma
    
    &::-webkit-datetime-edit-fields-wrapper {
      color: #605E5C;
    }
    
    &::-webkit-datetime-edit-text {
      color: #605E5C;
    }
    
    &::-webkit-calendar-picker-indicator {
      cursor: pointer;
      opacity: 0.7;
      width: 16px;
      height: 16px;
      
      &:hover {
        opacity: 1;
      }
    }
    
    // Placeholder styling when no date selected
    &:not(:valid),
    &[value=""] {
      color: #B4BABF;
    }
  }
}

