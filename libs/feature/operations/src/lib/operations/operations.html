<div class="h-full flex flex-col gap-sp-4">

  <div>
    <h1 class="text-2xl font-semibold text-primary font-opensans">Operations / Alert Queue</h1>
  </div>


  <poc-ops-filters
    [filters]="filters$ | async"
    [totalRecords]="totalRecords"
    [(alertId)]="selectedAlertId"
    [(priority)]="selectedPriority"
    [(type)]="selectedType"
    [(status)]="selectedStatus"
    [(riskRating)]="selectedRiskRating"
    [(lineOfBusiness)]="selectedLineOfBusiness"
    (filterChange)="onFilterChanged()"
    (apply)="applyFilters()"
    (reset)="resetFilters()"
  ></poc-ops-filters>


  <div class="flex-1 overflow-hidden flex flex-col bg-white px-sp-4 pt-sp-2 pb-sp-4 rounded-[8px] border border-neutral-border">
    <poc-ops-grid-toolbar
      (export)="null"
      (toggleAdvanced)="showAdvanceFilters = !showAdvanceFilters"
      (bulkAction)="null"
    ></poc-ops-grid-toolbar>


    <div class="flex-1 relative">
      <div class="absolute inset-0">
        <ag-grid-angular
          class="ag-theme-quartz h-full w-full"
          [rowData]="gridData$ | async"
          [columnDefs]="colDefs"
          [defaultColDef]="defaultColDef"
          [rowSelection]="'multiple'"
          [pagination]="false"
          [animateRows]="true"
          [rowBuffer]="20"
          [cacheBlockSize]="100"
          [isExternalFilterPresent]="isExternalFilterPresent"
          [doesExternalFilterPass]="doesExternalFilterPass"
          [getRowStyle]="getRowStyle"
          [suppressRowHoverHighlight]="false"
          (gridReady)="onGridReady($event)"
          (rowDoubleClicked)="onRowDoubleClicked($event)"
        ></ag-grid-angular>
      </div>
    </div>
  </div>
</div>


@if (showAdvanceFilters) {
  <poc-ops-advanced-filters
    [filters]="filters$ | async"
    [todayDate]="todayDate"
    [(state)]="advanceFilters"
    (close)="showAdvanceFilters = false"
    (apply)="applyAdvanceFilters()"
    (reset)="resetAdvanceFilters()"
  ></poc-ops-advanced-filters>
}
