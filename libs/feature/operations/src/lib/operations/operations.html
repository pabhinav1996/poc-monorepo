<div class="h-full flex flex-col gap-4">
  <!-- Header -->
  <div>
    <h1 class="text-2xl font-semibold text-primary font-opensans">Operations / Alert Queue</h1>
  </div>

  <!-- Filters Bar -->
  <poc-ops-filters
    [filters]="filters$ | async"
    [totalRecords]="totalRecords"
    [(alertId)]="selectedAlertId"
    [(priority)]="selectedPriority"
    [(type)]="selectedType"
    [(status)]="selectedStatus"
    [(riskRating)]="selectedRiskRating"
    [(lineOfBusiness)]="selectedLineOfBusiness"
    (filterChange)="onFilterChanged()"
    (apply)="applyFilters()"
    (reset)="resetFilters()"
  ></poc-ops-filters>

  <!-- AG Grid with Toolbar - Figma Frame 427322886 -->
  <div class="flex-1 overflow-hidden flex flex-col bg-white px-[16px] pt-[8px] pb-[16px] rounded-[8px] border border-neutral-border">
    <poc-ops-grid-toolbar
      (export)="null"
      (toggleAdvanced)="showAdvanceFilters = !showAdvanceFilters"
      (bulkAction)="null"
    ></poc-ops-grid-toolbar>

    <!-- Grid - Figma: x=16, y=56 from outer frame -->
    <div class="flex-1 relative">
      <div class="absolute inset-0">
        <ag-grid-angular
          class="ag-theme-quartz h-full w-full"
          [rowData]="gridData$ | async"
          [columnDefs]="colDefs"
          [defaultColDef]="defaultColDef"
          [rowSelection]="'multiple'"
          [pagination]="false"
          [animateRows]="true"
          [rowBuffer]="20"
          [cacheBlockSize]="100"
          [isExternalFilterPresent]="isExternalFilterPresent"
          [doesExternalFilterPass]="doesExternalFilterPass"
          [getRowStyle]="getRowStyle"
          [suppressRowHoverHighlight]="false"
          (gridReady)="onGridReady($event)"
          (rowDoubleClicked)="onRowDoubleClicked($event)"
        ></ag-grid-angular>
      </div>
    </div>
  </div>
</div>

<!-- Advance Filters Modal -->
@if (showAdvanceFilters) {
  <poc-ops-advanced-filters
    [filters]="filters$ | async"
    [todayDate]="todayDate"
    [(state)]="advanceFilters"
    (close)="showAdvanceFilters = false"
    (apply)="applyAdvanceFilters()"
    (reset)="resetAdvanceFilters()"
  ></poc-ops-advanced-filters>
}
